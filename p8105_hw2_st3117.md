p8105\_hw2\_st3117
================
Sha Tao
September 27, 2018

Problem 1 Table Cleaning
------------------------

``` r
# import data
transit = 
  read_csv(file = "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>% 
  gather(key = routes_number, value = routes_name, route1:route11) %>% 
  separate(routes_number, into = c("remove1", "routes_number"), sep = 5) %>% 
  filter(!is.na(routes_name)) %>% 
  mutate(
  entry = ifelse(entry == "YES", yes = TRUE, no = FALSE),
  routes_served = paste(routes_number, routes_name, sep = "_")) %>% 
  select(line:station_longitude, routes_served, entry, vending, entrance_type, ada) %>% 
  arrange(line, station_name)
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_integer(),
    ##   Route9 = col_integer(),
    ##   Route10 = col_integer(),
    ##   Route11 = col_integer(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

``` r
transit
```

    ## # A tibble: 4,270 x 9
    ##    line  station_name station_latitude station_longitu~ routes_served entry
    ##    <chr> <chr>                   <dbl>            <dbl> <chr>         <lgl>
    ##  1 4 Av~ 25th St                  40.7            -74.0 1_R           TRUE 
    ##  2 4 Av~ 25th St                  40.7            -74.0 1_R           TRUE 
    ##  3 4 Av~ 36th St                  40.7            -74.0 1_N           TRUE 
    ##  4 4 Av~ 36th St                  40.7            -74.0 1_N           TRUE 
    ##  5 4 Av~ 36th St                  40.7            -74.0 1_N           TRUE 
    ##  6 4 Av~ 36th St                  40.7            -74.0 2_R           TRUE 
    ##  7 4 Av~ 36th St                  40.7            -74.0 2_R           TRUE 
    ##  8 4 Av~ 36th St                  40.7            -74.0 2_R           TRUE 
    ##  9 4 Av~ 45th St                  40.6            -74.0 1_R           TRUE 
    ## 10 4 Av~ 45th St                  40.6            -74.0 1_R           TRUE 
    ## # ... with 4,260 more rows, and 3 more variables: vending <chr>,
    ## #   entrance_type <chr>, ada <lgl>

The dataset "transit" is a 9 by 4270 table.
It contains line, station\_name, latitude, longitude, routes\_served, entry, vending, entrance\_type and ADA compliance.
I started by importing the dataset and clean the variable names. Then, used gather function doing a wide to long transpose; used separate function getting routes\_number by itself; used filter function removing “NA”s in routes\_name; used ifelse function converting entry to a logical variable; combined routes\_number and routes\_served to a single variable routes\_served as requested; seleted the variables as requested; and arrange them by line and station\_name.
It is not a tidy dataset since the routes\_served encodes both routes\_number and routes\_served.
